# ================================================================
# CONFIGURATION DE BASE - PARTAGÉE PAR TOUS LES ENVIRONNEMENTS
# ================================================================
# Ce fichier contient les paramètres communs à tous les environnements
# (development, staging, production). Les valeurs spécifiques à chaque
# environnement sont surchargées dans les fichiers correspondants.
#
# ⚠️ ATTENTION: Ne jamais stocker de secrets (mots de passe, clés API)
# dans ce fichier. Utiliser les variables d'environnement à la place.
# ================================================================

[server]
# Adresse d'écoute du serveur
host = "0.0.0.0"
# Port par défaut
port = 8080
# Nombre de workers (recommandé: 2x nombre de CPU cores)
workers = 4
# Temps d'attente maximal pour une requête (secondes)
request_timeout = 20
# Taille maximale du corps de requête (Mo)
max_request_size = 50

[database]
# URL de connexion (surchargée par les variables d'environnement)
url = "postgresql://quantrust:quant12343rust2@localhost:5432/quantization"
# Nombre maximal de connexions simultanées
max_connections = 10
# Timeout de connexion (secondes)
connect_timeout = 5
# Timeout pour les connexions inactives (secondes)
idle_timeout = 300

[redis]
# URL de connexion Redis
url = "redis://localhost:6379"
# Nombre maximal de connexions
max_connections = 5
# Timeout pour les commandes (secondes)
command_timeout = 3

[storage]
# Type de stockage: "minio" (S3 compatible) ou "local"
type = "minio"
# Endpoint MinIO/S3
endpoint = "http://localhost:9000"
# Nom du bucket
bucket = "quant-mvp"
# Région (pour S3 AWS)
region = "us-east-1"
# Activation du chiffrement côté client
client_side_encryption = true

[quantization]
# Taille maximale de modèle supportée (Go)
max_model_size_gb = 20
# Temps maximal de traitement par job (minutes)
max_processing_time_min = 60
# Nombre de workers GPU dédiés
gpu_workers = 1
# Nombre de workers CPU dédiés
cpu_workers = 3
# Activation du fallback en cas d'échec
fallback_on_failure = true

[security]
# Durée de validité des JWT (heures)
jwt_expiry_hours = 24
# Limite de requêtes par minute pour le rate limiting
rate_limit_requests = 100
# Fenêtre de temps pour le rate limiting (secondes)
rate_limit_window_seconds = 60
# Activation du scan antivirus pour les uploads
antivirus_enabled = false

[logging]
# Niveau de log: "debug", "info", "warn", "error"
level = "info"
# Format des logs: "json" ou "text"
format = "json"
# Activation de l'observabilité (tracing)
tracing_enabled = true
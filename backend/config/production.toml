# ================================================================
# CONFIGURATION PRODUCTION - ENVIRONNEMENT DE PRODUCTION
# ================================================================
# Cette configuration est utilisée en production. Elle surcharge
# les paramètres de base.toml avec des valeurs optimisées pour
# la performance, la sécurité et la scalabilité.
#
# Pour utiliser cette configuration:
#   export RUN_MODE=production
#   cargo run --release
# ================================================================

[server]
port = 80
workers = 8  # Adapté à un serveur 4-core
request_timeout = 30
max_request_size = 100  # Plus grand pour les gros modèles

[database]
# URL fournie par variable d'environnement
url = "${postgresql://quantrust:quant12343rust2@localhost:5432/quantization}"
max_connections = 20
connect_timeout = 3
idle_timeout = 600

[redis]
url = "${REDIS_URL}"
max_connections = 10
command_timeout = 2

[storage]
type = "minio"
endpoint = "${MINIO_ENDPOINT}"
bucket = "quant-prod"
region = "us-east-1"
client_side_encryption = true

[quantization]
max_model_size_gb = 30
max_processing_time_min = 120
gpu_workers = 2
cpu_workers = 6
fallback_on_failure = true

[security]
jwt_expiry_hours = 12
rate_limit_requests = 60
rate_limit_window_seconds = 60
antivirus_enabled = true

[logging]
level = "info"
format = "json"
tracing_enabled = true